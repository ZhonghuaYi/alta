import os
import sys

Import('env')

# Library sources
sources = ['common.cpp', 
           'function.cpp', 
           'params.cpp', 
           'plugins_manager.cpp', 
           'rational_function.cpp', 
           'vertical_segment.cpp']

libs = []
if(os.name == 'posix'):
	libs = ['rt', 'dl']
#end

## Known compilation issue. If the core is not compiled with -fvisibility-hidden
## on OSX, the shared libraries and the softwares cannot share vtables. This
## impact the use of dynamic_cast in shared libraries.
##
ccflags = []
if sys.platform == 'darwin':
	ccflags = ['-fvisibility=hidden']
#end

env.StaticLibrary('../build/core', sources, LIBS=libs, CCFLAGS=ccflags)
